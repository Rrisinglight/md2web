
### **Содержание**

1. **Титульный лист (по шаблону)**
2. **Содержание**
3. **Список сокращений**
4. **Введение**
	1. Актуальность темы исследования
	2. Цель и задачи исследования
	3. Научная новизна
	4. Практическая значимость
5. **Аналитический обзор**
	1. Проблемы традиционных навигационных систем БПЛА  
	2. Современные методы повышения устойчивости навигации  
	3. Использование множественных GNSS-приёмников  
	4. Алгоритмы слияния данных: UKF, GRU и гибридные схемы  
	5. Опыт применения федеративных архитектур в робототехнике
	6. Технологии инерциального измерительного модуля (IMU)  
	7. Применение GNSS-датчиков в навигационных системах  
	8. Многочастотные GPS-модули и их интеграция  
	9. Методы слияния данных: UKF и GRU  
	10. Федеративные архитектуры и гибридные системы
6. **Содержательная и математическая постановка задачи**
7. **Описание математического аппарата и программно-алгоритмической части**
8. **Результаты исследований**
9. **Выводы**
10. **Список литературы (ГОСТ Р 7.0.5-2008)**

### **Список сокращений**

**БПЛА** – Беспилотный летательный аппарат
**ВС** – Воздушное судно
**ГНСС** – Глобальная навигационная спутниковая система (англ. GNSS)
**ЛЭП** – Линия электропередачи
**ЭМИ** – Электромагнитное излучение
**API** – Application Programming Interface (Программный интерфейс приложения)
**ECEF** – Earth-Centered Earth-Fixed (Система координат с центром в Земле)
**EKF** – Extended Kalman Filter (Расширенный фильтр Калмана)
**FLANN** – Fast Library for Approximate Nearest Neighbors
**GRU** – Gated Recurrent Unit (Управляемые рекуррентные блоки)
**GNSS** – Global Navigation Satellite System (Глобальная навигационная спутниковая система)
**HIL** – Hardware in the Loop (Аппаратное моделирование в контуре)
**IMU** – Inertial Measurement Unit (Инерциальный измерительный модуль)
**LLA** – Latitude, Longitude, Altitude (Широта, долгота, высота)
**LSTM** – Long Short-Term Memory (Долгая краткосрочная память)
**MEMS** – Microelectromechanical Systems (Микроэлектромеханические системы)
**NED** – North, East, Down (Север, восток, вниз)
**NLOS** – Non-Line-Of-Sight (Вне прямой видимости)
**PNT** – Position, Navigation, and Timing (Позиционирование, навигация и синхронизация)
**RANSAC** – Random Sample Consensus
**RNN** – Recurrent Neural Network (Рекуррентная нейронная сеть)
**RMSE** – Root Mean Square Error (Среднеквадратическая ошибка)
**RTK** – Real-Time Kinematics (Кинематика реального времени)
**SBC** – Single Board Computer (Одноплатный компьютер)
**SLAM** – Simultaneous Localization And Mapping (Одновременная локализация и построение карты)
**UKF** – Unscented Kalman Filter (Несцентрированный фильтр Калмана)
**UE** – Unreal Engine
**UAM** – Urban Air Mobility (Городская воздушная мобильность)
**VO** – Visual Odometry (Визуальная одометрия)
**VPS** – Visual Positioning System (Визуальная система позиционирования)

### Введение

Растущее применение БПЛА в специализированных промышленных и отраслевых задачах, таких как мониторинг и картографирование карьеров по добыче железной и магнитной руды, топографическая съемка, инспекция линий электропередач, требует повышенной надежности и точности навигационных систем. Традиционно БПЛА используют комбинацию глобальной навигационной спутниковой системы (GNSS), инерциального измерительного блока (IMU) и магнитометра для получения параметров движения. Такая конфигурация достаточно эффективна в типовых условиях эксплуатации, однако в сложных средах ярко проявляются характерные ограничения различных типов сенсоров. Инерциальные модули на базе недорогих MEMS-акселерометров и гироскопов подвержены дрейфу, усиливающемуся под действием вибраций, что приводит к накоплению ошибки со временем. Электронные компасы и магнитометрические системы существенно теряют точность в зонах интенсивных электромагнитных полей, в частности, при аэросъемке вблизи высоковольтных линий электропередач или при работе в горнодобывающих карьерах с высоким содержанием магнетитов и других ферромагнитных пород. В таких условиях классические алгоритмы слияния данных на основе расширенного фильтра Калмана (EKF) не всегда позволяют полностью компенсировать влияние вибраций, магнитных аномалий и интерференции сигналов, что обуславливает необходимость разработки альтернативных подходов к обеспечению устойчивой и точной навигации.

Одним из возможных решений является использование нескольких GPS-модулей. Объединение данных от трёх бюджетных GNSS-приёмников обеспечивает достаточную избыточность, что существенно повышает стабильность и точность навигации при относительно низкой стоимости по сравнению с традиционной схемой, использующей один GNSS-приёмник + IMU. Такой подход позволяет получать точные данные о положении и ориентации (рыскание, тангаж, крен) за счёт применения математических методов трилатерации и триангуляции сигналов от нескольких антенн GPS, что даёт возможность частично заменить традиционный инерциальный измерительный модуль и снизить зависимость от IMU, особенно в условиях высокой и нестабильной вибрации.

Целью данной работы является разработка и тестирование навигационной системы для БПЛА, использующей три бюджетных GNSS-приёмника и инерциальный измерительный модуль (IMU). Оптимальным решением задачи является интеграция GPS-модулей с IMU и применение внешнего вычислителя (SBC) для устойчивого объединения данных. 
Первым этапом планируется разработать алгоритм определения местоположения и ориентации аппарата с использованием метода трилатерации по разности фаз сигналов, принимаемых несколькими GNSS-антеннами. Для достижения дополнительной точности позиционирования и ориентации предполагается использовать технологию RTK с передачей поправок через 4G LTE-модем в реальном времени. Такой подход позволяeт не только отказаться от магнитных сенсоров, но и существенно снизить зависимость от инерциального измерительного модуля. Подход интегрирован с автопилотом(ArduPilot) через программный модуль, эмулирующий IMU на основе данных, полученных от системы из трёх GPS-приёмников, что обеспечит совместимость новой схемы навигации с уже существующими алгоритмами управления БПЛА.

Важной задачей работы является разработка и реализация алгоритма фильтрации данных от сенсоров с применением методов нелинейной фильтрации: сигма-точечного фильтра Калмана (UKF). Это позволит эффективно объединять и очищать сигналы IMU и GNSS от шумов и дрейфа, повышая надёжность навигации. Дополнительно планируется внедрение нейросетевого подхода на основе рекуррентной сети типа GRU. Нейросеть будет обучаться компенсировать остаточные ошибки фильтрации, используя выходные данные фильтров UKF, тем самым существенно повышая итоговую точность и устойчивость навигационного решения.

Для проверки и оценки эффективности предложенного решения будет проведено тестирование в реальных условиях эксплуатации БПЛА, итоговой задачей станет проверка и верификация всей системы на карьере при содействии горного инженера и маркшейдера из горного института МИСИС.

Навигационная система на базе нескольких GPS и IMU с применением UKF и слияния данных исключает необходимость в компасе и магнитометре, компенсирует дрейф, снижает влияние вибраций и частично заменяет IMU. Система эффективна при магнитных помехах, на карьерах, а также при топографической съёмке за счёт повышенной точности.


### Аналитический обзор

#### Определение местоположения: трилатерация и триангуляция

**Трилатерация** и **триангуляция** – два базовых принципа определения положения по внешним ориентирам. _Трилатерация_ основана на измерении расстояний до известных точек (ориентиров). Например, GNSS-позиционирование – классический случай трилатерации: приемник вычисляет свое местоположение, зная дальности до нескольких спутников с известными координатами. В общем случае расстояние до одного ориентира ограничивает положение объекта поверхностью сферы (или окружности в плоскости); пересечение сфер от нескольких ориентиров и дает местоположение. Для полной 3D-локации достаточно расстояний до 4 спутников (3 для координат и один для синхронизации времени). _Триангуляция_ же опирается на измерение углов (направлений) до известных ориентиров ([Microsoft PowerPoint - Lecture 16 GNSS](https://pdfs.semanticscholar.org/154e/6e511f31cf791dfddb8bf6f7da3d7555482b.pdf#:~:text=by%20trilateration,Trilateration%20Trian%20gulation)). В этом методе позиция определяется по пересечению направлений на несколько известных точек. Например, если БПЛА способен измерять угол прибытия радиосигналов от двух наземных маяков с известными координатами, пересечение двух направленных лучей укажет местоположение (аналогично работе классических радионавигационных систем). В отличие от трилатерации, триангуляция требует знания ориентации приемника или специальных антенн для измерения направления.

На практике GNSS используют **принцип трилатерации**: измеряя время прихода сигнала от спутников, вычисляют расстояния и решают систему уравнений для координат. Высокоточное позиционирование (например, RTK – кинематика в реальном времени) дополняет это измерением фазовых смещений несущей, что требует разрешения целочисленной неоднозначности. Развитие методов решения этой задачи, таких как алгоритм LAMBDA Тёйниссена, повысило точность определения расстояний до миллиметров ([Coordinates : A resource on positioning, navigation and beyond » Blog Archive » “The general advantages of multi-GNSS are that one can obtain more accurate and more robust parameter solutions”](https://mycoordinates.org/the-general-advantages-of-multi-gnss-are-that-one-can-obtain-more-accurate-and-more-robust-parameter-solutions/#:~:text=GNSS%20receivers%20can%20measure%20fractions,navigation%20of%20the%20receiver%20location)), сделав возможным **сантиметровое позиционирование** и даже ориентацию по нескольким приемникам. **Мульти-GNSS** (использование сразу нескольких созвездий – GPS, ГЛОНАСС, Galileo, BeiDou и др.) существенно увеличивает количество видимых спутников, улучшая геометрию и точность решения. Как отмечает проф. Тёйниссен, _«общие преимущества multi-GNSS заключаются в получении более точных и более надежных решений»_, что проявляется в ускорении сходимости высокоточных методов (PPP, RTK) и возможности работать на больших дистанциях в RTK ([Coordinates : A resource on positioning, navigation and beyond » Blog Archive » “The general advantages of multi-GNSS are that one can obtain more accurate and more robust parameter solutions”](https://mycoordinates.org/the-general-advantages-of-multi-gnss-are-that-one-can-obtain-more-accurate-and-more-robust-parameter-solutions/#:~:text=The%20general%20advantages%20of%20multi,baseline%20lengths%20for%20which%20instantaneous)). Проще говоря, приемник, способный одновременно использовать несколько навигационных систем и частот, имеет больше шансов видеть достаточное число спутников даже в сложных условиях (городская застройка, пересеченная местность), тем самым повышая **робастность позиционирования**.

**Пример – GPS в условиях городской застройки:** В открытом небе гражданский GPS способен дать точность ~2–5 м, а с поправками RTK – до сантиметров ([ISSN: 2315-4462](https://www.ijmerr.com/uploadfile/2020/1113/20201113045827652.pdf#:~:text=,also)). Но в городе сигнал спутников отражается от зданий (многолучевость) или блокируется (NLOS), вызывая ошибки. Многодиапазонные и многосистемные приемники (L1/L2, GPS+ГЛОНАСС+Galileo) частично решают проблему: больше сигналов – выше шанс, что хотя бы некоторые из них приходят прямиком. Также _трилатерацию_ можно комбинировать с другими технологиями – например, наземными дальномерами (UWB, лазерный дальномер) или барометром по высоте – для повышения надежности.

**Триангуляция** же на БПЛА встречается реже, но все же применяется, особенно когда GNSS недоступен. Один из примеров – визуальная одометрия и SLAM, где дрон определяет свое движение относительно объектов, выделяя угол направления на них в последовательных кадрах. Другой пример – радиотехнические системы: при известном расположении радиопередатчиков дрон может использовать направленные антенны или фазовые решетки для оценки угла на передатчик и триангуляцией вычислять свое положение. Однако такие системы сложнее в реализации, поэтому основная нагрузка в навигации БПЛА ложится на комбинацию IMU+GNSS (инерциально-спутниковая навигация), где трилатерационное определение координат по спутникам дополняется интегрированием угловых и линейных скоростей.

#### Интеграция IMU и GPS: традиционные методы фильтрации

**Инерциальная навигационная система (INS)** на основе IMU обеспечивает автономное отслеживание положения и ориентации путем интегрирования измерений ускорений и угловых скоростей. Ее достоинство – высокая частота и непрерывность обновления (IMU работают сотни Гц) и независимость от внешних сигналов. Недостаток – накопление погрешности со временем: малые смещения датчиков и шумы интегрируются, приводя к дрейфу оценки положения (ошибка растет квадратично со временем) ([A GRU and AKF-Based Hybrid Algorithm for Improving INS/GNSS Navigation Accuracy during GNSS Outage](https://www.mdpi.com/2072-4292/14/3/752#:~:text=Although%20INS%20error%20could%20be,hardware%20cost%2C%20equipment%20volume%2C%20and)). **GNSS** наоборот, дает абсолютные координаты с ограниченной частотой (обычно 1–10 Гц) и небольшим шумом, но подвержен выпадениям и помехам. Эти два источника дополняют друг друга: INS обеспечивает связность между редкими GNSS-обновлениями, а GPS корректирует медленно нарастающий дрейф INS ([A GRU and AKF-Based Hybrid Algorithm for Improving INS/GNSS Navigation Accuracy during GNSS Outage](https://www.mdpi.com/2072-4292/14/3/752#:~:text=environment%2C%20including%20overpasses%2C%20boulevards%2C%20and,124%2C5%20%2C%20126%2C7)). Поэтому почти во всех современных БПЛА применяется **интегрированная INS/GNSS навигация**.

Классическим инструментом объединения данных является фильтр Калмана и его варианты. В реальных задачах модель движения нелинейна, поэтому распространены **расширенный фильтр Калмана (EKF)** и **unscented фильтр Калмана (UKF)** для INS/GPS. EKF линеаризует уравнения движения и измерения, что упрощает их, но может приводить к неточным оценкам при сильной нелинейности. UKF же использует статистические точки (точки sigma) для более точного учета нелинейностей без необходимости вычисления производных. В литературе отмечается, что **UKF часто обеспечивает более высокую точность по сравнению с EKF** ценой увеличения вычислительной нагрузки ( [Comparison of EKF, EKF2 and UKF in a loosely coupled INS/GPS integration](https://open.metu.edu.tr/handle/11511/27047#:~:text=Unit%20,UKF%20has%20the%20best%20performance) ) ( [Comparison of EKF, EKF2 and UKF in a loosely coupled INS/GPS integration](https://open.metu.edu.tr/handle/11511/27047#:~:text=complexity%20is%20rising%2C%20respectively,of%20poor%20robustness%20of%20UKF) ). В частности, в экспериментальном сравнении навигации БПЛА с интеграцией GPS/IMU было показано, что UKF дает меньшую ошибку, менее чувствителен к шумам IMU и способен устойчиво работать при более широком диапазоне возмущений, чем EKF ( [Comparison of EKF, EKF2 and UKF in a loosely coupled INS/GPS integration](https://open.metu.edu.tr/handle/11511/27047#:~:text=Unit%20,UKF%20has%20the%20best%20performance) ). Кроме того, UKF лучше сохраняет устойчивость при пропадании GPS-сигнала, продолжая оценивать состояние с меньшей ошибкой, тогда как EKF может сильнее деградировать ( [Comparison of EKF, EKF2 and UKF in a loosely coupled INS/GPS integration](https://open.metu.edu.tr/handle/11511/27047#:~:text=complexity%20is%20rising%2C%20respectively,of%20poor%20robustness%20of%20UKF) ). С другой стороны, EKF обычно требует меньше вычислений и иногда оказывается более устойчивым к единичным выбросам измерений (отдельным ошибочным данным GPS), тогда как UKF при наличии резких скачков измерений может дать сбой в оценке ( [Comparison of EKF, EKF2 and UKF in a loosely coupled INS/GPS integration](https://open.metu.edu.tr/handle/11511/27047#:~:text=complexity%20is%20rising%2C%20respectively,of%20poor%20robustness%20of%20UKF) ). Поэтому выбор фильтра зависит от требований к точности и вычислительным ресурсам бортового компьютера.

В большинстве автопилотов БПЛА (ArduPilot, PX4 и др.) реализованы EKF/UKF для слияния данных. Например, прошивка _ArduPilot ArduCopter_ использует внутренний EKF (с версией EKF2/EKF3) для объединения показаний акселерометров, гироскопов, магнитометров, барометра и GPS. Эта система позволяет задавать весовые коэффициенты, отфильтровывать грубые выбросы (например, игнорировать GPS при большом HDOP) и даже работать при частичной потере данных. В _ROS_ для подобных задач широко применяется пакет **robot_localization**, предоставляющий настраиваемый EKF и UKF. Он позволяет настраивать входные данные (один или несколько IMU, одометрию, GPS), в том числе поддерживает запуск двух фильтров – один для локальной одометрии, другой для глобального положения с GPS – в так называемой схеме dual-EKF ([Integrating GPS Data — robot_localization 2.6.12 documentation](http://docs.ros.org/en/melodic/api/robot_localization/html/integrating_gps.html#:~:text=position%20estimate%2C%20one%20potential%20solution,is%20to%20do%20the%20following)). Это сходно с архитектурой, рекомендуемой для роботов: один фильтр отслеживает непрерывное движение (IMU + одометрия) в относительной системе координат, другой периодически корректирует глобальное смещение по GPS, чтобы итоговая оценка не «скакала» при появлении новых GPS измерений ([Integrating GPS Data — robot_localization 2.6.12 documentation](http://docs.ros.org/en/melodic/api/robot_localization/html/integrating_gps.html#:~:text=1,parameter)). Таким образом, классические фильтры остаются основой навигации, предоставляя оптимальную оценку состояния дрона (позиция, скорость, ориентация) с учетом статистики ошибок сенсоров.

**Федеративные фильтры.** При усложнении архитектуры сенсоров (например, несколько GPS, камера, барометр, одометрия) возрастает размерность задач фильтрации. **Федеративный фильтр Калмана** – подход, разделяющий общую задачу на несколько локальных фильтров и один центральный (мастер-фильтр). Идея в том, что _локальные фильтры_ обрабатывают каждый свой набор датчиков независимо, а их выходы объединяются на верхнем уровне. Такая схема повышает отказоустойчивость (сбой одного датчика можно локализовать) и модульность системы ([Federated filter for fault-tolerant integrated navigation systems](https://ieeexplore.ieee.org/document/195473/#:~:text=systems%20ieeexplore,common%20data%20from%20a)). Например, в работе Negru et al. (2024) предложена **гибридная федеративная архитектура** для навигации дрона: IMU, GNSS, монокамера и барометр обрабатываются локальными EKF, а глобальный фильтр реализован на основе нейросетевого блока GRU ([Resilient Multi-Sensor UAV Navigation with a Hybrid Federated Fusion Architecture](https://www.mdpi.com/1424-8220/24/3/981#:~:text=GNSS%2C%20the%20IMU%20,to%20a%20classic%20federated%20architecture)). Такая комбинация позволила улучшить устойчивость навигации в условиях многолучевости и прерывания GNSS по сравнению с классической схемой, где на всех уровнях были только EKF ([Resilient Multi-Sensor UAV Navigation with a Hybrid Federated Fusion Architecture](https://www.mdpi.com/1424-8220/24/3/981#:~:text=GNSS%2C%20the%20IMU%20,to%20a%20classic%20federated%20architecture)). В целом, федеративные схемы используются в системах, где есть несколько разнородных или географически разнесенных источников информации (например, два GPS-приемника на борту – каждый со своим EKF, объединенные затем, или для интеграции данных от бортовых сенсоров и наземных станций). Этот метод восходит к задаче _фильтрации в распределенных системах_ и хорошо масштабируется, хотя и требует внимательной калибровки, чтобы центральный фильтр правильно учитывал корреляции ошибок локальных фильтров.

#### Использование нескольких GPS-приемников

Одной из тем обзора является **применение нескольких GPS-модулей** на одном дроне. Казалось бы, один приемник уже дает координаты – зачем больше? Рассмотрим несколько сценариев и преимуществ:

- **Повышение надежности и отказоустойчивости.** Два (и более) независимых GPS-приемника могут служить резервом друг для друга. Автопилот ArduPilot поддерживает режим _Dual GPS_: два модуля одновременно подключены, и прошивка либо выбирает лучший по качеству сигнал (режим _UseBest_), либо выполняет **смешивание (blending)** измерений ([GPS Blending (aka Dual GPS) — Copter documentation](https://ardupilot.org/copter/docs/common-gps-blending.html#:~:text=type%20of%20GPS)). При _blending_ рассчитывается взвешенное среднее координат и скоростей, где вес определяется оценкой точности от каждого приемника. Тем самым, кратковременные сбои или глитчи, возникающие на одном модуле (например, из-за локальной помехи или ошибки обработки), не приводят к скачку навигационного решения – их влияние сглаживается вторым модулем ([GPS Blending (aka Dual GPS) — Copter documentation](https://ardupilot.org/copter/docs/common-gps-blending.html#:~:text=GPS%20Blending%20combines%20the%20readings,of%20glitches%20affecting%20the%20vehicle)). Использование двух GPS снижает вероятность, что _оба_ приемника одновременно дадут сбой на одну и ту же величину. Разумеется, полностью статистически независимы их ошибки не будут (оба принимают одни и те же спутники в одном окружении), но разнесение антенн даже на десятки сантиметров способно немного различать траектории многолучевых отражений, и один модуль может ловить больше спутников, чем другой, в конкретной ориентации дрона.
    
- **Двойная антенна как компас (определение курса по двум GPS).** Если установить на дрон **две GNSS-антенны**, разнесенные на известное расстояние (базу), то помимо координат каждого приемника можно получить высокоточный вектор между антеннами. Известно, что GNSS в режиме RTK способен измерять относительное положение (вектор от “ровера” до “базы”) с сантиметровой точностью. Если обе антенны находятся на одном аппарате, и одна из них условно играет роль “базы” (опорной точки), а вторая – “ровера”, то решается задача _подвижной базы_ (Moving Baseline RTK). Результатом работы алгоритма RTK будет компонент ориентации – обычно **азимут (курс)** линии, соединяющей антенны. Таким способом можно реализовать **GPS-компас**, абсолютно независимый от магнитометра. Современные двухчастотные приемники (например, u-blox ZED-F9P) поддерживают вывод курса при подключении двух антенн; требование – база около 30–50 см и фиксированное решение фазовой неоднозначности. Исследования показывают, что с базой порядка 1 м можно достичь субградусной точности по курсу. В одном эксперименте сочетание высокоточного IMU и двух GPS (одно высокоточное, одно бюджетное) достигло **точности 0.2° по курсу при базе 92 см** ([ISSN: 2315-4462](https://www.ijmerr.com/uploadfile/2020/1113/20201113045827652.pdf#:~:text=results.%20In%20,GPS%2C%20including%20two%20main%20steps)). Другой источник указывает, что ~1 м базовой линии достаточно для ≈0.1° точности курса при использовании двойной антенны RTK ([Measuring GPS Heading & Course Over Ground](https://www.unmannedsystemstechnology.com/feature/measuring-gps-heading-course-over-ground/#:~:text=Measuring%20GPS%20Heading%20%26%20Course,degree%20precision)). Разумеется, чем больше база – тем выше точность (на крупных беспилотниках с базой 2–3 м погрешность курса может быть считанные сотые градуса ([](https://ir.canterbury.ac.nz/bitstream/10092/5759/1/thesis_fulltext.pdf#:~:text=match%20at%20L5651%20thousandths%20of,This%20was))).
    
    Для реализации GPS-компаса обе антенны должны получать однотипные спутниковые сигналы, и желательно использовать двухчастотный RTK (L1+L2), чтобы быстро и надежно решать неоднозначности. Алгоритм основывается фактически на той же трилатерации, но вычисляет не абсолютные координаты, а относительные: вектор между двумя приемниками определяется по разности псевдодальностей и фаз (применяются методы _double difference_, описанные в RTK). Систему из двух антенн калибруют, задавая точное расстояние между ними и монтажный угол на аппарате (например, линия антенн должна быть параллельна носу дрона). В ArduPilot подобная функция называется **GPS for Yaw (Moving Baseline)** – она появилась, чтобы дроны могли _“отказаться от магнитометра”_ в пользу спутникового определения курса. Согласно документации, для надежной работы необходим фиксированный RTK “режим 6” и проверка соответствия расстояния между модулями заданной базе с точностью ~20% ([GPS for Yaw (aka Moving Baseline) — Copter documentation](https://ardupilot.org/copter/docs/common-gps-for-yaw.html#:~:text=Note%20that%20it%20can%20take,good%20enough%20in%20several%20ways)). При соблюдении условий прошивка начнет использовать разницу координат двух GPS для вычисления yaw, что проверяется тестом: например, вы выравниваете аппарат на реальный ориентир и сравниваете отображаемый курс ([GPS for Yaw (aka Moving Baseline) — Copter documentation](https://ardupilot.org/copter/docs/common-gps-for-yaw.html#:~:text=In%20a%20location%20with%20good,the%20ground%20station%20updates%20correctly)). В руководстве прямо отмечено, что **двойной GPS-курсовой канал помогает компенсировать магнитные возмущения** – ArduPilot приводит пример использования _Moving Baseline Yaw для устранения влияния магнитных возмущений_ ([GPS for Yaw (aka Moving Baseline) — Copter documentation](https://ardupilot.org/copter/docs/common-gps-for-yaw.html#:~:text=Using%20Moving%20Baseline%20Yaw%20to,Reject%20Magnetic%20Disturbances%C2%B6)).
    
- **Пространственное усреднение и подавление помех.** Несколько разнесенных антенн теоретически могут способствовать обнаружению искажений сигнала. Например, если рядом действует локальный источник помех на одной антенне, другая может быть менее подвержена ему. Также при спуфинге (преднамеренной подмене GNSS-сигналов) два приемника, разнесенные на известное расстояние, будут получать сгенерированные сигналы, несоответствующие геометрии настоящих – это можно заметить. На исследовательском уровне подобные идеи рассматриваются для повышения **устойчивости PNT** (позиционирования, навигации и времени). В контексте нескольких модулей на одном дроне можно реализовать проверку согласованности: если решения двух GPS резко разошлись – вероятно, один из них ошибается (многолучевость или сбой). Тогда система может автоматически выбрать более надежный или задействовать фильтр для устранения выброса. Этот подход смыкается с задачей контроля целостности (_RAIM – Receiver Autonomous Integrity Monitoring_), обычно выполняемой внутри одного приемника с избытком спутников, но может быть расширен и на мульти-приемную конфигурацию.
    
- **Мульти-GNSS разгрузка.** Теоретически, если на борту стоят два разных приемника, один может быть настроен преимущественно на GPS+ГЛОНАСС, а другой на Galileo+BeiDou, либо один работает с RTK-поправками, а другой без. Это не столь распространено, но может дать выигрыш: например, один модуль выдает решение высокоточной относительной позиции (RTK), но может время от времени терять фикс (прыгать в режим плавающего решения), а второй всегда обеспечивает более сглаженную, хоть и менее точную абсолютную позицию. Комбинируя их, можно одновременно получать плавность и точность.
    

Подводя итог, **несколько GPS-приемников** на БПЛА – это практичный способ повысить надежность навигации и дать новую информацию (курс). Особенно ценным он становится _в условиях, где магнитометр бесполезен_. Вблизи высоковольтных ЛЭП магнитное поле может достигать сотен микротесла – для сравнения, земное поле ~50 мкТл. Исследования показывают, что при **магнитном поле >180 µT беспилотники начинают испытывать дрейф и отклонение курса из-за нарушения работы магнитометра** ([Electric and Magnetic Fields Analysis of the Safety Distance for UAV Inspection around Extra-High Voltage Transmission Lines](https://www.mdpi.com/2504-446X/8/2/47#:~:text=UAV%20instability%2C%20suggesting%20a%20threshold,small%20UAVs%20in%20the%20electric)). В таких ситуациях даже калибровка не спасает – поле внешнее, динамически меняющееся по пространству, датчик «слепнет». Единственный выход – **отказаться от магнитного компаса**, заменив его либо гироскопической ориентацией, либо данными от нескольких GNSS-антенн. Практика инспекции ЛЭП уже переходит на такие решения: дроны с двойными RTK-GPS способны уверенно держать курс возле проводов, где обычные дроны теряли направление. Докладывают, что с включенным режимом GPS yaw дрон может подлетать ближе к объектам с сильными магнитными аномалиями без потери управления курсом. Конечно, следует помнить, что электромагнитное окружение ЛЭП влияет и на GPS: например, на 345 кВ линиях отмечались перебои GPS на расстоянии до ~15 м от проводов ([Electric and Magnetic Fields Analysis of the Safety Distance for UAV Inspection around Extra-High Voltage Transmission Lines](https://www.mdpi.com/2504-446X/8/2/47#:~:text=flight%20control%20system%20can%20be,avoid%20GPS%20and%20sensor%20disruptions)). Поэтому сочетание нескольких GPS с IMU и мощными алгоритмами фильтрации должно использоваться комплексно – IMU позволит кратковременно пересечь зону с ослабленным GPS, а два GPS быстро восстановят надежный курс и координаты сразу по выходу из тени.

Еще одно применение нескольких GNSS-антенн – **полная оценка ориентации (курса, крена, тангажа)**. Теоретически, с тремя правильно расположенными антеннами (не коллинеарно) можно напрямую вычислять все углы ориентации аппарата без участия IMU. Некоторые геодезические приемники (например, системы на основе NovAtel SPAN) позволяют конфигурировать тройные антенны на одном объекте. Впрочем, для БПЛА это избыточно – достаточно одной базы и одного ровера, чтобы заменить компас, а углы крена и тангажа надежно даст инерциальная система.

#### Нейросетевые методы компенсации ошибок IMU/GPS

В последние годы в навигацию активно внедряются **методы глубокого обучения** для повышения точности и устойчивости. В классической INS/GNSS интеграции все возможные ошибки (смещение датчиков, дрейф гироскопов, задержки, масштабные коэффициенты) пытаются моделировать и оценивать внутри фильтра Калмана. Однако точные модели не всегда известны, а настройки фильтра (ковариации шумов) трудно адаптировать к разным режимам движения. **Данные, накопленные в полетах, можно использовать для обучения нейросетей**, способных предсказывать ошибки или дополнять модель.

Особенно перспективно применение **рекуррентных нейронных сетей (RNN)**, таких как LSTM (довгая краткосрочная память) и GRU (блоки с управляемым забыванием). Эти сети хорошо работают с последовательностями временных данных и могут выучивать динамику ошибок, зависящих от предыдущих состояний. Одно из типовых применений – _“бриджинг”_ (bridging) GPS-провалов. Когда GNSS-сигнал теряется (например, дрон пролетает под мостом или спускается в карьер), INS начинает быстро терять точность. Если заранее обучить RNN на данных полета, сеть может **прогнозировать накопление ошибки INS** и тем самым помогать скорректировать ее в период отсутствия GPS. В работе Tang et al. (2022) предложен гибридный алгоритм, где **нейросеть GRU предсказывает изменение позиции во время GPS-отказа**, а параллельно работает адаптивный фильтр Калмана (AKF), уточняющий оценку ([A GRU and AKF-Based Hybrid Algorithm for Improving INS/GNSS Navigation Accuracy during GNSS Outage](https://www.mdpi.com/2072-4292/14/3/752#:~:text=gated%20recurrent%20unit%20,120%20s%20GNSS%20outage%20are)) ([A GRU and AKF-Based Hybrid Algorithm for Improving INS/GNSS Navigation Accuracy during GNSS Outage](https://www.mdpi.com/2072-4292/14/3/752#:~:text=demonstrate%20that%20both%20recurrent%20neural,and%2016.12)). Тестирование на реальных дорожных данных показало, что такая комбинация существенно лучше, чем чистый INS или даже чем INS с обычным (неадаптивным) Калманом. В частности, **GRU+AKF уменьшил ошибку по горизонтали на ~32% по сравнению с просто GRU+KF** при длительном (180 с) отсутствии GPS ([A GRU and AKF-Based Hybrid Algorithm for Improving INS/GNSS Navigation Accuracy during GNSS Outage](https://www.mdpi.com/2072-4292/14/3/752#:~:text=demonstrate%20that%20both%20recurrent%20neural,and%2016.12)). Также было отмечено преимущество рекуррентных сетей: _и LSTM, и GRU превзошли многослойный персептрон (MLP)_ в точности предсказания позиций при пропаже GPS ([A GRU and AKF-Based Hybrid Algorithm for Improving INS/GNSS Navigation Accuracy during GNSS Outage](https://www.mdpi.com/2072-4292/14/3/752#:~:text=practical%20road%20datasets%20and%20compared,concluded%20that%20the%20adaptive%20estimation)). Причем GRU показал себя даже лучше LSTM – при сопоставимой точности он обучается быстрее и вычислительно проще ([A GRU and AKF-Based Hybrid Algorithm for Improving INS/GNSS Navigation Accuracy during GNSS Outage](https://www.mdpi.com/2072-4292/14/3/752#:~:text=scales,and%2016.12)). Это важное наблюдение, поскольку встраивание громоздких моделей в бортовую систему ограничено ресурсами. GRU имеет меньше параметров, чем LSTM, и поэтому стал популярным выбором в задачах навигации.

Другой подход – использовать нейросети для **подавления шумов и дрейфов датчиков**. Например, можно обучить сеть очищать показания гироскопа от шума (denoising) или оценивать текущее смещение акселерометра. В обзоре Cohen & Klein (2024) приведено множество примеров применения глубокого обучения в инерциальной навигации: от калибровки датчиков до частичной замены навигационных алгоритмов ([Inertial Navigation Meets Deep Learning: A Survey of Current Trends and Future Directions](https://arxiv.org/html/2307.00014v2#:~:text=techniques%20has%20increased%20significantly%20in,The%20latter%20is%20done%20by)). Отмечается, что современные _data-driven_ (данными-управляемые) методы, как правило, интегрируются с классическими (_model-based_) алгоритмами, усиливая их, а не полностью заменяя ([Inertial Navigation Meets Deep Learning: A Survey of Current Trends and Future Directions](https://arxiv.org/html/2307.00014v2#:~:text=and%20the%20accessibility%20of%20publicly,operate%3A%20land%2C%20air%2C%20and%20sea)). Это важный тренд: нейросеть может, к примеру, обучиться выдавать некоторые параметры для фильтра Калмана (коэффициенты ковариации, поправки модели) в реальном времени по контексту движения. Таким образом достигается **адаптивность** – система подстраивается под текущее поведение дрона. Также обсуждаются гибридные архитектуры: часть состояния оценивает Kalman (где хороша модель), а часть – нейросеть. Пример – уже упомянутая федеративная схема с GRU на верхнем уровне ([Resilient Multi-Sensor UAV Navigation with a Hybrid Federated Fusion Architecture](https://www.mdpi.com/1424-8220/24/3/981#:~:text=GNSS%2C%20the%20IMU%20,to%20a%20classic%20federated%20architecture)), где GRU фактически учится объединять выходы нескольких EKF, получая оптимальную итоговую оценку даже в сложных ситуациях (многолучевость, погодные воздействия). Экспериментально такая система показала _95-процентную ошибку менее 0.6 м_ по позиции даже в стресс-тестах с ухудшенным GPS ([Resilient Multi-Sensor UAV Navigation with a Hybrid Federated Fusion Architecture](https://www.mdpi.com/1424-8220/24/3/981#:~:text=environments%2C%20minimizing%20significant%20degradations%20of,The)), тогда как чисто фильтрационная схема давала большие отклонения.

Нейросети также применяются для обработки _сырых сигналов_ GNSS (что больше относится к области обработки сигналов, чем навигации) – например, нейронные трекеры могут улучшать удержание фазы при помехах. В рамках же навигационных алгоритмов интересны подходы с **обучением конца-конец**: когда входом являются исходные данные датчиков (ускорения, угловые скорости, псевдодальности), а выходом – непосредственно оценка траектории. Некоторые работы используют для этого сверточные сети (CNN) или трансформеры. Однако для критичных приложений (как автономный полет) такие _black box_ решения пока не особо доверяются из-за трудности гарантий. Поэтому гибридные системы (DL + фильтр) сейчас более популярны. Например, Liu et al. предлагают объединять одномерные сверточные сети с GRU, чтобы предсказывать приращения позиции GNSS на ближайшее время и встраивать это в общий INS/GNSS алгоритм ([Inertial Navigation Meets Deep Learning: A Survey of Current Trends and Future Directions](https://arxiv.org/html/2307.00014v2#:~:text=research%20in%20,scenarios%20of%20denied%20GNSS%20environments)). Другие авторы пытаются оценивать с помощью RNN непосредственно положение и скорость в режиме end-to-end ([Inertial Navigation Meets Deep Learning: A Survey of Current Trends and Future Directions](https://arxiv.org/html/2307.00014v2#:~:text=match%20at%20L424%20was%20implemented,develop%201DCNN%20and%20LSTM%20methods)). Также есть исследования по улучшению оценки ориентации: так, сравнивались GRU, LSTM и их комбинации для фильтрации показаний гироскопов, уменьшая интегральный шум (что полезно для более стабильного угла) ([Inertial Navigation Meets Deep Learning: A Survey of Current Trends and Future Directions](https://arxiv.org/html/2307.00014v2#:~:text=LSTM%2C%20GRU%2C%20and%20hybrid%20LSTM,in%20order%20to%20achieve%20accurate)).

Применительно к БПЛА, нейросетевые методы особо актуальны, когда аппарат сталкивается с нестандартными условиями, не полностью учтенными в модели. Например, в индустриальных условиях может меняться уровень вибраций, возмущающих IMU, или присутствовать аномальные магнитные поля. Нейросеть, обученная на полетных данных, может уловить эти скрытые факторы. Есть интересный пример из недавней работы: была предложена модель, которая **учитывает магнитные возмущения ЛЭП в EKF** через явное моделирование поля (уравнения Биота–Савара) ([Electric and Magnetic Fields Analysis of the Safety Distance for UAV Inspection around Extra-High Voltage Transmission Lines](https://www.mdpi.com/2504-446X/8/2/47#:~:text=Various%20methods%20have%20been%20proposed,The)). Хотя там не нейросеть, а физическая модель, сам подход характерен – добавлять в фильтр компоненты, компенсирующие специфические локальные эффекты. Авторы показали, что внедрение модели поля ЛЭП в фильтр позволяет дрону уверенно летать вдоль гидроэлектростанционных труб, тогда как без такого учета алгоритм начинал давать отклонения ([Electric and Magnetic Fields Analysis of the Safety Distance for UAV Inspection around Extra-High Voltage Transmission Lines](https://www.mdpi.com/2504-446X/8/2/47#:~:text=to%20simulate%20and%20test%20the,voltage%20equipment)). Нейросеть могла бы выполнять схожую роль, только выводя поправки не по явно заданной формуле, а по обученной на данных зависимости.

В заключение, **нейросетевые методы постепенно обогащают навигационные системы БПЛА**, позволяя более эффективно использовать избыточные данные и предшествующий опыт (наработки данных). Особенно они полезны для компенсации ошибок IMU при потерях GPS или при некорректной работе отдельных сенсоров. Тем не менее, классические методы фильтрации по-прежнему задают основу, к которой подключаются нейросетевые модули. Будущие тенденции – это дальнейшее развитие гибридных схем (например, использование трансформеров для адаптивного прогноза ошибок INS, объединение визуальных признаков и инерциальных в единых сетях и т.д. ([Inertial Navigation Meets Deep Learning: A Survey of Current Trends and Future Directions](https://arxiv.org/html/2307.00014v2#:~:text=and%20the%20accessibility%20of%20publicly,operate%3A%20land%2C%20air%2C%20and%20sea))).

#### Слияние разнородных сенсоров и комплексные системы

Современная навигация БПЛА редко ограничивается только IMU и GPS. В зависимости от задачи могут подключаться **барометры** (для высоты), **магнитометры** (для курса, если условия позволяют), **камеры** (визуальная одометрия, SLAM), **лидар** или **радиодальномеры** (высота над рельефом, предот撞новение), **одометрия** колес/винтов (для наземных или закрепленных дронов), **ультраширокополосные метки** (UWB-навигция в помещениях) и пр. Задача объединения данных от всех этих источников – обеспечить _сенсорный синтез_, т.е. целостную оценку положения, более точную и надежную, чем любая подсистема в отдельности. Мы рассмотрели выше federated Kalman и EKF/UKF как инструменты – они применимы и здесь.

Например, в **системах навигации ROS** часто используют пакет _robot_localization_ для одновременной фильтрации IMU, одометрии, GPS и иногда компаса. В случае ArduPilot – имеется модуль _Vision Positioning_ для учета данных камеры (через внешние вычисления типа VINS-Fusion, передающие позиции в автопилот). Существуют и специализированные исследовательские разработки: скажем, алгоритмы, объединяющие GNSS, INS и информацию от визирования на уже имеющуюся карту местности (map-matching) или от обнаружения радиомаяков.

**Комбинированная обработка данных** также включает понятия _loosely coupled_ vs _tightly coupled_ интеграции. В loosely coupled подходе каждый сенсор сначала самостоятельно выдает решение (например, GNSS-приемник выдает готовые координаты), а потом они объединяются на более высоком уровне фильтра. В tightly coupled – сырые измерения разных сенсоров включаются прямо в общий вектор состояния. Так, INS и GNSS можно связать на уровне псевдодальностей: фильтр напрямую обрабатывает времена прихода сигналов со спутников вместе с ускорениями, что позволяет использовать даже частичные наборы спутников (менее 4) совместно с инерциальной информацией. Это увеличивает надежность в условиях плохого приема, хотя усложняет модель. Ещё плотнее интеграция – **GNSS/INS/визуальная одометрия** в едином оптимизаторе (некоторые ВИНС-системы уже поддерживают внедрение GPS-фактора в задачу оптимизации траектории). В таких схемах все доступные данные одновременно влияют на оценку траектории дрона.

**Федеративные схемы** в контексте множества сенсоров позволяют разбить задачу: например, сделать один фильтр чисто инерциальным (гиро+акс), другой – визуальным (камера или лидар SLAM), третий – спутниковым (GPS), а потом объединить на верхнем уровне. Такой подход продемонстрирован в ряде исследований. В упомянутой работе 2025 г. по навигации в промышленной среде предложен метод NSDDI-AFF, который динамически выявляет деградирующие каналы датчиков и изолирует их влияние ([Adaptive Federated Kalman Filtering with Dimensional Isolation for Unmanned Aerial Vehicle Navigation in Degraded Industrial Environments](https://www.mdpi.com/2504-446X/9/3/168#:~:text=proposes%20the%20NSDDI,AFF)). Система тестировалась в угольном складе и трубопроводе ГЭС, где лидар и камера периодически теряют качество (монотонные структуры, плохой свет). За счет адаптивного федеративного фильтра, отключающего “плохие” измерения, удалось добиться впечатляющей точности – _RMSE позиции порядка 5 см, ориентации ~0.5°_ ([Adaptive Federated Kalman Filtering with Dimensional Isolation for Unmanned Aerial Vehicle Navigation in Degraded Industrial Environments](https://www.mdpi.com/2504-446X/9/3/168#:~:text=adaptive%20thresholding%2C%20degradation%20isolation%2C%20and,robust%20solution%20for%20challenging%20industrial)). Это значительно лучше, чем стандартные SLAM-алгоритмы (LIO-SAM), показавшие метры ошибки в тех же условиях ([Adaptive Federated Kalman Filtering with Dimensional Isolation for Unmanned Aerial Vehicle Navigation in Degraded Industrial Environments](https://www.mdpi.com/2504-446X/9/3/168#:~:text=adaptive%20thresholding%2C%20degradation%20isolation%2C%20and,robust%20solution%20for%20challenging%20industrial)). Такой результат подчеркивает, насколько важно грамотно сочетать различные источники: если один выходит из строя (в темном тоннеле камера теряет трекинг или магнитометр “сошел с ума” у линии электропередачи), другой датчик должен перехватывать задачу, а фильтр – своевременно это распознать.

Таким образом, **широкий спектр технологий сенсорного слияния** уже используется и исследуется для БПЛА: от тривиального объединения двух GPS-модулей до сложных многоуровневых схем с нейросетевой оценкой. Общая тенденция – повышение автономности и живучести навигационной системы. БПЛА будущего, особенно для городских миссий (Urban Air Mobility) или промышленного применения, должны сохранять устойчивый полет даже в условиях, где один или два обычных сенсора “ослеплены” ([Resilient Multi-Sensor UAV Navigation with a Hybrid Federated Fusion Architecture](https://www.mdpi.com/1424-8220/24/3/981#:~:text=Future%20UAV%20,that%20integrates%20data%20from%20the)) ([Resilient Multi-Sensor UAV Navigation with a Hybrid Federated Fusion Architecture](https://www.mdpi.com/1424-8220/24/3/981#:~:text=GNSS%2C%20the%20IMU%20,to%20a%20classic%20federated%20architecture)). Для этого применяется избыточность (много сенсоров одного типа), разнородность (разные принципы – спутники, инерция, зрение, радио – дополняют друг друга) и интеллектуальная обработка (адаптивные алгоритмы, обученные компенсировать нестандартные эффекты).

#### Применение в условиях магнитных возмущений

Особое внимание в запросе уделено полетам _вблизи ЛЭП и в карьерах с магнитной рудой_, то есть там, где **магнитометры непригодны**. Из всего вышесказанного можно сделать практические выводы для таких сценариев:

- **Использование двойного GPS для курса.** Это практически стандарт для инспекции ЛЭП сейчас. Как мы описали, система dual-antenna RTK способна дать точный азимут независимо от магнитного поля. В полете около ЛЭП, где **магнитное поле >180 µT выводит из строя компас** ([Electric and Magnetic Fields Analysis of the Safety Distance for UAV Inspection around Extra-High Voltage Transmission Lines](https://www.mdpi.com/2504-446X/8/2/47#:~:text=UAV%20instability%2C%20suggesting%20a%20threshold,small%20UAVs%20in%20the%20electric)), автопилот должен быть переведен в режим, не зависящий от магнитометра. ArduPilot позволяет принудительно отключить компас и полагаться на _GPS-for-yaw_. В таком режиме дрон будет удерживать направление по спутникам. Конечно, нужно время для инициализации: сразу после взлета GPS-антеннам требуется получить фиксированное RTK-решение, обычно это занимает несколько десятков секунд до пары минут (зависит от качества приемника и наличия RTK-поправок). Документация отмечает, что “требуется некоторое время, чтобы два модуля GPS получили достаточно хороший фикс для работы yaw” ([GPS for Yaw (aka Moving Baseline) — Copter documentation](https://ardupilot.org/copter/docs/common-gps-for-yaw.html#:~:text=Note%20that%20it%20can%20take,good%20enough%20in%20several%20ways)). Поэтому перед заходом в критическую зону оператор дрона ждет, когда система покажет, что GPS yaw “готов” (например, в ArduPilot статус GPS yaw отображается как “GPSYaw” и значение отклонения).
    
- **Отказ от компаса, доверие инерциальной системе.** Помимо GPS-компаса, еще один путь – использовать гироскопический курс. Если дрон в полете уже сориентирован, на короткое время он может игнорировать компас и удерживать курс за счет гироскопов (с помощью регуляторов стабилизации) и периодической корректировки от GPS-навигации (по изменению положения относительно маршрута). Однако длительно так лететь сложно – будет накапливаться дрейф курса. Поэтому обычно комбинируют: при активных маневрах курс корректируется по GPS-навигации (например, при полете по прямой можно вычислить направление по смещению координат, хотя это шумно), а в остальное время полагаются на предварительно откалиброванный гироскоп. **Двойной GPS значительно надежнее** – он дает абсолютный курс даже в статике. В карьерах с аномальной породой, где вокруг весь компас “сходит с ума”, можно разместить на дроне недорогой RTK-сетап из двух модулей (сейчас они весьма компактны) и решить проблему.
    
- **Фильтрация помех на GPS.** Не стоит забывать, что сильное электромагнитное поле и металлические конструкции влияют не только на компас. Как показало исследование, при очень близком расстоянии (<5 м) от проводов высоковольтных линий могут наблюдаться сбои в GPS и даже _нестабильность полета_ из-за влияния электрического поля на электронику дрона ([Electric and Magnetic Fields Analysis of the Safety Distance for UAV Inspection around Extra-High Voltage Transmission Lines](https://www.mdpi.com/2504-446X/8/2/47#:~:text=mitigate%20the%20effects%20of%20EMFs,not%20address%20the%20response%20of)) ([Electric and Magnetic Fields Analysis of the Safety Distance for UAV Inspection around Extra-High Voltage Transmission Lines](https://www.mdpi.com/2504-446X/8/2/47#:~:text=utility%20industry%20reported%20EMI%20disruptions,117%5D%2C%20the)). Поэтому при облете ЛЭП существуют рекомендации по минимальной дистанции пролета (обычно не ближе 15–30 м в зависимости от напряжения линии ([Electric and Magnetic Fields Analysis of the Safety Distance for UAV Inspection around Extra-High Voltage Transmission Lines](https://www.mdpi.com/2504-446X/8/2/47#:~:text=flight%20control%20system%20can%20be,avoid%20GPS%20and%20sensor%20disruptions))). Если же задача требует подлететь ближе (например, для детального осмотра изолятора), то навигационная система должна быть готова к временному ухудшению GPS. Тут снова выручает **инерциальная система с хорошим гироскопом**: на несколько секунд она может удержать стабилизацию, даже если GPS “поплывет”. В некоторых промышленных дронах применяются двух- или трехмодульные IMU (например, резервные на случай сбоя или для усреднения шума). В сочетании с высокочувствительными гироскопами это дает очень устойчивый автопилот.
    
- **Визуальная навигация как дополнение.** В карьерах (особенно под землей или в ямах) GPS может отсутствовать вовсе. Магнитометр там тоже бесполезен. Поэтому приходится опираться на INS и местные средства – лидар, камеры, радиомаяки. При полетах над месторождениями магнитной руды на открытом воздухе GPS обычно работает, но искажен компас. Можно интегрировать визуальный курс: например, держать дрон ориентированным на определенный объект или по направлению дороги, используя компьютерное зрение. Однако это уже выходит за рамки классических GPS/IMU схем.
    

Подчеркнем, что в **ArduPilot** уже предусмотрены профильные решения: помимо dual-GPS yaw, есть функция _GPS yaw blending_ (сочетание компаса и GPS yaw для плавности перехода), а также _магнитный отказоустойчивый режим_ (EKF может автоматически игнорировать компас, если считает его данные неверными, и переключиться на другую информацию о yaw). Разработчики отмечают, что _“GPS-for-Yaw можно использовать для подавления магнитных возмущений”_, что на практике сильно повысило надежность при инспекции ЛЭП ([GPS for Yaw (aka Moving Baseline) — Copter documentation](https://ardupilot.org/copter/docs/common-gps-for-yaw.html#:~:text=Using%20Moving%20Baseline%20Yaw%20to,Reject%20Magnetic%20Disturbances%C2%B6)). В _ROS_-ориентированных системах подобных готовых решений “из коробки” меньше, но общий подход тот же: отключить компас, добавить вторую GNSS-антенну и прописать ее как источник yaw в алгоритме локализации.